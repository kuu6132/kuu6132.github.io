<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì¼ì¼ ì—…ë¬´ ë³´ê³ </title>

<style>
body{
  margin:0;
  background:linear-gradient(135deg,#0b1220,#0a0f1a);
  color:#e5e7eb;
  font-family:Segoe UI;
}

.container{
  width:900px;
  margin:40px auto;
}

/* ìƒë‹¨ ì¹´ë“œ */
.header{
  background:rgba(25,35,60,0.6);
  border-radius:18px;
  padding:25px;
  box-shadow:0 0 25px rgba(0,0,0,.4);
}

.header-top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.percent{
  font-size:34px;
  font-weight:bold;
  color:#60a5fa;
}

.progress-wrap{
  margin-top:12px;
  height:8px;
  background:#1f2937;
  border-radius:8px;
  overflow:hidden;
}

#progressBar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#3b82f6,#60a5fa);
  transition:.25s;
}

/* ë²„íŠ¼ */
.controls{
  margin-top:15px;
}

.btn{
  display:inline-block;
  padding:6px 14px;
  border-radius:20px;
  background:#1f2937;
  border:1px solid #374151;
  cursor:pointer;
  transition:.2s;
  margin-right:8px;
}
.btn.active-hide{
  border-color:#34d399;
  color:#34d399;
  background:rgba(52,211,153,0.15);
}
.btn:hover{
  background:#2c3b55;
  transform:translateY(-2px);
}

.btn.active{
  background:#3b82f6;
  border:none;
}

/* ì¹´í…Œê³ ë¦¬ */
.category-title{
  margin-top:30px;
  margin-bottom:10px;
  color:#34d399;
  font-weight:bold;
}

/* ê·¸ë£¹ ì¹´ë“œ */
.group{
  background:rgba(30,41,59,0.6);
  border-radius:14px;
  margin-bottom:14px;
  overflow:hidden;
}

.group-header{
  padding:15px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  cursor:pointer;
}

.group-info{
  margin-left:10px;
}

.group-title{
  font-weight:600;
}

.group-desc{
  font-size:12px;
  opacity:.6;
}

.group-count{
  border:1px solid #334155;
  padding:4px 10px;
  border-radius:8px;
  font-size:12px;
}

/* í•˜ìœ„ ëª©ë¡ */
.group-items{
  max-height:0;
  overflow:hidden;
  transition:.25s;
  border-top:1px dashed #334155;
}

.group.open .group-items{
  max-height:500px;
}

.sub-item{
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px 20px;
  font-size:14px;
}

.sub-item input{
  width:16px;
  height:16px;
}

.hide-completed .group.done{
  display:none;
}
.group.done{
  background:linear-gradient(180deg, rgba(16,185,129,0.25), rgba(30,41,59,0.6));
  box-shadow:0 0 12px rgba(16,185,129,0.35);
  border:1px solid rgba(16,185,129,0.6);
}

/* ì™„ë£Œëœ ê·¸ë£¹ ì œëª© ê°•ì¡° */
.group.done .group-title{
  color:#34d399;
  text-decoration:line-through;
}

/* ì¹´ìš´íŠ¸ ë°•ìŠ¤ ê°•ì¡° */
.group.done .group-count{
  border-color:#34d399;
  color:#34d399;
  font-weight:bold;
}
.sub-item.completed{
  opacity:.45;
  text-decoration:line-through;
}
.group-check{
   width:22px;
  height:22px;
}
.top-nav{
  display:flex;
  gap:12px;
  justify-content:center;
  margin-bottom:20px;
}

.nav-btn{
  background:#1f2937;
  border:1px solid #374151;
  color:#cbd5e1;
  padding:10px 18px;
  border-radius:12px;
  cursor:pointer;
  font-size:14px;
  transition:.2s;
}

.nav-btn:hover{
  background:#2b3a55;
  transform:translateY(-2px);
}

.nav-btn.active{
  background:#3b82f6;
  border:none;
  color:white;
  box-shadow:0 0 12px rgba(59,130,246,.5);
}
</style>
</head>

<body>
  <div class="top-nav">
  <button class="nav-btn" onclick="goPage('index')">ğŸ§® ê¸°ì§ˆ íŒŒë°</button>
  <button class="nav-btn active" onclick="goPage('daily')">ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸</button>
</div>
<div class="container">

<!-- ìƒë‹¨ -->
<div class="header">
  <div class="header-top">
    <div>
      <div style="font-size:22px;font-weight:600">â€¼ï¸ê´€ë¦¬ì ì²´í¬ë¦¬ìŠ¤íŠ¸â€¼ï¸</div>
      <div id="date"></div>
    </div>
    <div class="percent" id="percent">0%</div>
  </div>

  <div class="progress-wrap">
    <div id="progressBar"></div>
  </div>

  <div class="controls">
    <span class="btn" id="hideBtn">ìˆ¨ê¹€ Off</span>
    <span class="btn" id="resetBtn">ì „ì²´ í•´ì œ</span>
  </div>
</div>


<!-- ì¹´í…Œê³ ë¦¬ -->
<div class="category-title">â— ì§€ì—­ ê±´ì„¤</div>

<div class="group">
  <div class="group-header">
    <div style="display:flex;align-items:center;">
      <input type="checkbox" class="group-check">
      <div class="group-info">
        <div class="group-title">ê±°ì  ê´€ë¦¬</div>
        <div class="group-desc">ê³µì¥ ìƒì‚°í’ˆìœ¼ë¡œ ê´€ë¦¬ê¶Œ êµí™˜í•˜ê¸°</div>
      </div>
    </div>
    <div class="group-count">0/2</div>
  </div>

  <div class="group-items">
    <label class="sub-item">
      <input type="checkbox" class="task"> 4ë²ˆ í˜‘ê³¡ ê´€ë¦¬ê¶Œ êµí™˜
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ë¬´ë¦‰ ê´€ë¦¬ê¶Œ êµí™˜
    </label>
  </div>

</div>


<div class="group">
  <div class="group-header">
    <div style="display:flex;align-items:center;">
      <input type="checkbox" class="group-check">
      <div class="group-info">
        <div class="group-title">ë¬¼ì ê´€ë¦¬</div>
        <div class="group-desc">ë¬´íŠ¸ì½”ì¸</div>
      </div>
    </div>
    <div class="group-count">0/2</div>
  </div>

  <div class="group-items">
    <label class="sub-item">
      <input type="checkbox" class="task"> 4ë²ˆ í˜‘ê³¡ ë³€ë™ë¬¼ì
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ë¬´ë¦‰ ë³€ë™ë¬¼ì
    </label>
  </div>

</div>
<div class="group">
  <div class="group-header">
    <div style="display:flex;align-items:center;">
      <input type="checkbox" class="group-check">
      <div class="group-info">
        <div class="group-title">ì €ì¥ê³  ë…¸ë“œ</div>
        <div class="group-desc">ë°°ë‹¬ì˜ ë¯¼ì¡± ì£¼ë¬¸~</div>
      </div>
    </div>
    <div class="group-count">0/4</div>
  </div>

  <div class="group-items">
    <label class="sub-item">
      <input type="checkbox" class="task"> ì˜¤ë¦¬ì§€ëŠ„ ì—°êµ¬ êµ¬ì—­
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ê´‘ë§¥ êµ¬ì—­
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ì—ë„ˆì§€ ê³µê¸‰ ê³ ì§€
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ë¬´ë¦‰ì„± ë„ì‹¬
    </label>
  </div>
</div>
  <div class="category-title">â— ì¼ì¼ ìˆ˜ë ¹</div>

<div class="group">
  <div class="group-header">
    <div style="display:flex;align-items:center;">
      <input type="checkbox" class="group-check">
      <div class="group-info">
        <div class="group-title">ìƒì </div>
        <div class="group-desc">ë§¤ì¼ë§¤ì¼ ê¼­ í• ê²ƒ! </div>
      </div>
    </div>
    <div class="group-count">0/4</div>
  </div>
  <div class="group-items">
    <label class="sub-item">
      <input type="checkbox" class="task"> í¬ë ˆë”§ ê±°ë˜ì†Œ
    </label>
  </div>
</div>

<div class="group">
  <div class="group-header">
    <div style="display:flex;align-items:center;">
      <input type="checkbox" class="group-check">
      <div class="group-info">
        <div class="group-title">ì¬í™œìš© ì„¼í„°</div>
        <div class="group-desc">ì¼ê´„ìˆ˜ë ¹ ê¸‰í•¨! </div>
      </div>
    </div>
    <div class="group-count">0/8</div>
  </div>
  <div class="group-items">
    <label class="sub-item">
      <input type="checkbox" class="task"> í˜‘ê³¡ê¸¸
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ê±°ì ì§€ì—­
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ì•„ë¶€ë ˆì´ ì±„ì„ì¥
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ì˜¤ë¦¬ì§€ëŠ„ ì—°êµ¬ êµ¬ì—­
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ê´‘ë§¥ êµ¬ì—­
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ì—ë„ˆì§€ ê³µê¸‰ ê³ ì§€
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ë¬´ë¦‰ì„±
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ê²½ì˜¥ ê³¨ì§œê¸°
    </label>
  </div>
</div>

<div class="group">
  <div class="group-header">
    <div style="display:flex;align-items:center;">
      <input type="checkbox" class="group-check">
      <div class="group-info">
        <div class="group-title">í•„ìˆ˜ í•­ëª©</div>
        <div class="group-desc">ë§¤ì¼ë§¤ì¼ í™•ì¸ í• ê²ƒ! </div>
      </div>
    </div>
    <div class="group-count">0/2</div>
  </div>
  <div class="group-items">
    <label class="sub-item">
      <input type="checkbox" class="task"> ì¼ì¼ í™œì•½ë„ 100
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ì´ì„± ì†Œëª¨(ë³¸ì¸ ê¸°ì¤€ ì—¬ìœ ë¡œìš°ë©´ ì²´í¬)
    </label>
  </div>
</div>

<div class="group">
  <div class="group-header">
    <div style="display:flex;align-items:center;">
      <input type="checkbox" class="group-check">
      <div class="group-info">
        <div class="group-title">ì œì‘ ì¬ë£Œ</div>
        <div class="group-desc">í•˜ëŠ” ì‚¬ëŒë§Œ? </div>
      </div>
    </div>
    <div class="group-count">0/2</div>
  </div>
  <div class="group-items">
    <label class="sub-item">
      <input type="checkbox" class="task"> ë†ì‘ë¬¼ ìˆ˜í™•
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ë¹„ë£Œ ì¬ë£Œ ìˆ˜ì§‘
    </label>
  </div>
</div>

<div class="group">
  <div class="group-header">
    <div style="display:flex;align-items:center;">
      <input type="checkbox" class="group-check">
      <div class="group-info">
        <div class="group-title">ì œê°•í˜¸</div>
        <div class="group-desc">ë‚˜ì—¬! ê´€ë¦¬ì! </div>
      </div>
    </div>
    <div class="group-count">0/2</div>
  </div>
  <div class="group-items">
    <label class="sub-item">
      <input type="checkbox" class="task"> ì •ë³´ êµë¥˜ 5íšŒ
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ìƒì‚° ì§€ì› 5íšŒ
    </label>
    <label class="sub-item">
      <input type="checkbox" class="task"> ì œê°•í˜¸ ê´€ë¦¬
    </label>
  </div>
</div>

</div> 

<script>
function goPage(page){

  // GAS ì›¹ì•±ì¸ì§€ í™•ì¸
  if (location.hostname.includes("script.google.com")) {

    // í˜„ì¬ URL ìœ ì§€í•˜ë©´ì„œ page íŒŒë¼ë¯¸í„°ë§Œ êµì²´
    const url = new URL(window.location.href);
    url.searchParams.set('page', page);
    window.location.replace(url.toString());

  } else {

    // GitHub Pages (ì •ì  html ì´ë™)
    window.location.href = page + ".html";

  }
}

document.querySelectorAll(".nav-btn")[1].classList.add("active");
/* ë‚ ì§œ */
document.getElementById("date").textContent = 
  new Date().toLocaleDateString("ko-KR", {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    weekday: 'long' // "ì›”ìš”ì¼"ê¹Œì§€ í‘œì‹œ
  });


/* ìƒìœ„ ì²´í¬ â†’ í•˜ìœ„ ì „ì²´ ì²´í¬ */
document.querySelectorAll(".group-check").forEach(groupCheck=>{
  groupCheck.addEventListener("change", e=>{
    const group = e.target.closest(".group");
    const tasks = group.querySelectorAll(".task");

    tasks.forEach(t=>{
      t.checked = e.target.checked;
      t.parentElement.classList.toggle("completed", t.checked);
    });

    updateAll();
    saveState();
  });
});


/* í•˜ìœ„ ì²´í¬ â†’ ìƒìœ„ ì²´í¬ ìƒíƒœ ë°˜ì˜ */
document.addEventListener("change", e=>{
  if(!e.target.classList.contains("task")) return;

  const group = e.target.closest(".group");
  const tasks = group.querySelectorAll(".task");
  const checked = group.querySelectorAll(".task:checked");
  const groupCheck = group.querySelector(".group-check");

  groupCheck.checked = (tasks.length === checked.length);

  e.target.parentElement.classList.toggle("completed", e.target.checked);

  updateAll();
  saveState();
});
function saveState(){
  const states = [];

  document.querySelectorAll(".task").forEach((t,i)=>{
    states[i] = t.checked;
  });

  localStorage.setItem("dailyChecklist", JSON.stringify(states));
}

/* ê·¸ë£¹ ì¹´ìš´íŠ¸ + ì „ì²´ ì§„í–‰ë¥  */
function updateAll(){

  let total = 0;
  let done = 0;


  document.querySelectorAll(".group").forEach(group=>{
    const tasks = group.querySelectorAll(".task");
    const checked = group.querySelectorAll(".task:checked");

    // ê·¸ë£¹ ì¹´ìš´íŠ¸ í‘œì‹œ
    group.querySelector(".group-count").textContent =
      `${checked.length}/${tasks.length}`;
    const title = group.querySelector(".group-title");
    // ğŸ”¥ ì—¬ê¸° ì¶”ê°€ (ì™„ë£Œ ê·¸ë£¹ íŒì •)
    if(tasks.length === checked.length && tasks.length !== 0){
      group.classList.add("done");
    }else{
      group.classList.remove("done");
    }

    total += tasks.length;
    done += checked.length;
  });

  const percent = total ? Math.round(done/total*100) : 0;

  document.getElementById("percent").textContent = percent+"%";
  document.getElementById("progressBar").style.width = percent+"%";
}


/* ì•„ì½”ë””ì–¸ */
document.querySelectorAll(".group-header").forEach(header=>{
  header.addEventListener("click", e=>{
    if(e.target.tagName === "INPUT") return;
    header.parentElement.classList.toggle("open");
  });
});


/* ì™„ë£Œ ìˆ¨ê¸°ê¸° */
let hide=false;
const hideBtn=document.getElementById("hideBtn");

hideBtn.onclick=()=>{
  hide=!hide;
  document.body.classList.toggle("hide-completed");

  hideBtn.textContent = hide?"ìˆ¨ê¹€ On":"ìˆ¨ê¹€ Off";
  hideBtn.classList.toggle("active-hide", hide);
};
document.getElementById("resetBtn").onclick = () => {

  // 1. ëª¨ë“  í•˜ìœ„ ì²´í¬ í•´ì œ
  document.querySelectorAll(".task").forEach(t=>{
    t.checked = false;
    t.parentElement.classList.remove("completed");
  });

  // 2. ëª¨ë“  ê·¸ë£¹ ì²´í¬ í•´ì œ
  document.querySelectorAll(".group-check").forEach(g=>{
    g.checked = false;
  });

  // 3. ê·¸ë£¹ ì™„ë£Œ í‘œì‹œ ì œê±°
  document.querySelectorAll(".group").forEach(group=>{
    group.classList.remove("done");
  });
  localStorage.removeItem("dailyChecklist");
updateAll();
};

function loadState(){
  const saved = localStorage.getItem("dailyChecklist");
  if(!saved) return;

  const states = JSON.parse(saved);

  // 1ï¸âƒ£ í•˜ìœ„ ì²´í¬ ë³µì›
  document.querySelectorAll(".task").forEach((t,i)=>{
    if(states[i]){
      t.checked = true;
      t.parentElement.classList.add("completed");
    }
  });

  // 2ï¸âƒ£ ê·¸ë£¹ ì²´í¬ ìƒíƒœ ì¬ê³„ì‚° (ì—¬ê¸°ê°€ í•µì‹¬)
  document.querySelectorAll(".group").forEach(group=>{
    const tasks = group.querySelectorAll(".task");
    const checked = group.querySelectorAll(".task:checked");
    const groupCheck = group.querySelector(".group-check");

    if(groupCheck){
      groupCheck.checked = (tasks.length > 0 && tasks.length === checked.length);
    }
  });

  updateAll();
}

loadState();

</script>

</body>
</html>
