<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë¬´ê¸° ë„ê°</title>

<style>
body{
  margin:0;
  background: radial-gradient(circle at 50% 20%, #0f172a, #020617 70%);
  font-family: "Segoe UI", Arial, sans-serif;
  color:#e5e7eb;
  padding-top:80px; /* â­ í—¤ë” ë†’ì´ë§Œí¼ ë°€ì–´ì¤Œ (í•„ìˆ˜) */
  padding-left:280px;
}

.header{
  text-align:center;
  padding:20px 0;
  font-size:26px;
  font-weight:700;
  color:#60a5fa;
}

.grid{
  width:1200px;
  max-width:95%;
  margin:20px auto;
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(150px,1fr));
  gap:16px;
}

.toggle-wrapper {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 5px 12px;
  border-radius: 8px;
  border: 1px solid #00cc44 none;
  width: fit-content;
  gap: 15px;
}

.data-btn  {
  background-color: #007bff; /* íŒŒë€ìƒ‰ ë°°ê²½ */
  color: white;              /* ê¸€ììƒ‰ í°ìƒ‰ */
  border: 1px solid #0056b3; /* ì¡°ê¸ˆ ë” ì§„í•œ íŒŒë€ìƒ‰ í…Œë‘ë¦¬ */
}

.data-btn:hover {
  background-color: #0056b3; /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ë” ì§„í•˜ê²Œ */
}

.card{
  width:160px;
  background:#111;   /* ê¸°ë³¸ ì–´ë‘  */
  border-radius:10px;
  padding:10px;
  box-sizing:border-box;
  cursor:pointer;
  transition:.18s;
  position:relative;
  overflow:hidden;
}
.card.grade6::before{
  background:
    radial-gradient(circle at 50% 120%, rgba(255,40,40,.45), transparent 60%),
    radial-gradient(circle at 50% -20%, rgba(255,0,0,.25), transparent 60%);
}

.card.grade5::before{
  background:
    radial-gradient(circle at 50% 120%, rgba(255,200,40,.45), transparent 60%),
    radial-gradient(circle at 50% -20%, rgba(255,215,0,.25), transparent 60%);
}

.card::before{
  content:"";
  position:absolute;
  inset:0;
  opacity:.18;
  pointer-events:none;
  transition:.2s;
}

.card:hover{
  transform:translateY(-4px) scale(1.03);
  border-color:#60a5fa;
  box-shadow:0 0 18px rgba(96,165,250,.45);
}

.card-img{
  width:100%;
  height:110px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.card-img img{
  max-width:100%;
  max-height:100%;
  object-fit:contain;
}

.card-name{
  text-align:center;
  margin-top:8px;
  font-size:13px;
  font-weight:600;
}
/* íšë“ ìƒíƒœ (ìš°í´ë¦­) */
.card.done{
  border-color:#22c55e !important;

  /* ë…¹ìƒ‰ ê´‘ì±„ */
  box-shadow:
    0 0 14px rgba(34,197,94,.8),
    0 0 28px rgba(34,197,94,.45),
    inset 0 0 18px rgba(34,197,94,.25);

  background:
    radial-gradient(circle at 50% 120%, rgba(34,197,94,.25), transparent 65%),
    radial-gradient(circle at 50% -30%, rgba(34,197,94,.18), transparent 60%),
    #0f1f14;
}

.card.done::after{
  content:"âœ” íšë“";
  position:absolute;
  top:8px;
  right:8px;
  font-size:12px;
  background:#22c55e;
  color:#001b08;
  padding:3px 6px;
  border-radius:6px;
  font-weight:700;
}

.card.done:hover{
  transform:translateY(-5px) scale(1.05);
  box-shadow:
    0 0 22px rgba(34,197,94,1),
    0 0 40px rgba(34,197,94,.7),
    inset 0 0 22px rgba(34,197,94,.35);
}

.counter{
  text-align:center;
  margin-top:10px;
  color:#34d399;
  font-weight:bold;
}

.grade-title{
  width:1200px;
  max-width:95%;
  margin:40px auto 10px;
  font-size:20px;
  font-weight:700;
  padding-left:8px;
}

/* 6ì„± ì œëª© */
.grade-6-title{
  color:#ff4d4d;
  text-shadow:0 0 10px rgba(255,60,60,.7);
}

/* 5ì„± ì œëª© */
.grade-5-title{
  color:#ffd84d;
  text-shadow:0 0 10px rgba(255,215,0,.7);
}
/* ===== ì¹´ë“œ ë“±ê¸‰ í…Œë‘ë¦¬ ===== */

/* 6ì„± ì¹´ë“œ */
.card.grade6{
  border:2px solid #ff2a2a;
  box-shadow:0 0 14px rgba(255,0,0,.6);
}

/* 5ì„± ì¹´ë“œ */
.card.grade5{
  border:2px solid #ffd700;
  box-shadow:0 0 12px rgba(255,215,0,.6);
}
/* ===== ìƒë‹¨ ê²Œì„ í—¤ë” ===== */

.top-header{
  position:fixed;        /* â­ í•µì‹¬ (ê³ ì •) */
  top:0;
  left:0;
  width:100%;
  height:72px;
  z-index:9999;          /* ì¹´ë“œ ìœ„ì— í•­ìƒ ë³´ì´ê²Œ */

  display:flex;
  align-items:center;
  justify-content:center;

  background:linear-gradient(to bottom, rgba(2,6,23,.98), rgba(2,6,23,.65));
  border-bottom:1px solid rgba(96,165,250,.25);
  box-shadow:0 6px 35px rgba(0,0,0,.8);
  backdrop-filter: blur(8px); /* â­ ìœ ë¦¬ ëŠë‚Œ */
}

/* ì¤‘ì•™ íƒ€ì´í‹€ */
.top-header .title{
  font-size:28px;
  font-weight:800;
  letter-spacing:2px;
  color:#93c5fd;
  text-shadow:
    0 0 10px rgba(96,165,250,.8),
    0 0 25px rgba(37,99,235,.6);
}

.top-header.scrolled{
  background:linear-gradient(to bottom, rgba(2,6,23,1), rgba(2,6,23,.85));
  box-shadow:0 8px 40px rgba(0,0,0,1);
}

/* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
.back-btn{
  position:absolute;
  left:18px;
  top:50%;
  transform:translateY(-50%);
  padding:8px 14px;
  border-radius:10px;
  border:1px solid rgba(96,165,250,.5);
  background:rgba(30,41,59,.55);
  color:#bfdbfe;
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  transition:.2s;
  backdrop-filter: blur(6px);
}

/* hover íš¨ê³¼ */
.back-btn:hover{
  background:#3b82f6;
  color:white;
  border-color:#60a5fa;
  box-shadow:0 0 12px rgba(96,165,250,.8);
  transform:translateY(-50%) scale(1.05);
}

/* í´ë¦­ */
.back-btn:active{
  transform:translateY(-50%) scale(.96);
}

.reset-owned-btn{
  position:absolute;
  left:140px; /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ì˜† */
  top:50%;
  transform:translateY(-50%);

  padding:8px 14px;
  border-radius:10px;
  border:1px solid rgba(34,197,94,.6);
  background:rgba(20,83,45,.55);
  color:#bbf7d0;
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  transition:.2s;
  backdrop-filter: blur(6px);
}

.reset-owned-btn:hover{
  background:#22c55e;
  color:#052e16;
  box-shadow:0 0 12px rgba(34,197,94,.8);
}

.reset-owned-btn:active{
  transform:translateY(-50%) scale(.96);
}

.count{
  font-size:15px;
  margin-left:10px;
  color:#34d399;
  font-weight:700;
  text-shadow:0 0 8px rgba(52,211,153,.6);
}

.grade-6-title .count{
  color:#ff6b6b;
  text-shadow:0 0 8px rgba(255,80,80,.7);
}

.grade-5-title .count{
  color:#ffd84d;
  text-shadow:0 0 8px rgba(255,215,0,.7);
}

/* ===== ì™¼ìª½ ì„¤ëª… ì˜ì—­ ===== */
.side-info{
  position:fixed;
  top:95px;
  left:18px;
  width:340px;
  z-index:998;
}

/* HUD íŒ¨ë„ */
.info-box{
  background:linear-gradient(
    180deg,
    rgba(15,23,42,.65),
    rgba(2,6,23,.75)
  );
  border-radius:18px;
  padding:18px 18px 16px;

  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);

  /* í•µì‹¬: í…Œë‘ë¦¬ ëŒ€ì‹  ê´‘ì› */
  box-shadow:
    inset 0 0 0 1px rgba(96,165,250,.18),
    0 0 25px rgba(37,99,235,.25),
    0 10px 40px rgba(0,0,0,.9);
}

/* ì œëª© */
.info-title{
  font-size:15px;
  font-weight:700;
  letter-spacing:.5px;
  color:#93c5fd;
  margin-bottom:12px;
  padding-bottom:8px;
  border-bottom:1px solid rgba(96,165,250,.25);
}

/* ëª©ë¡ */
.guide-list{
  list-style:none;
  padding:0;
  margin:0;
}

.guide-list li{
  position:relative;
  padding-left:14px;
}

.guide-list li::before{
  content:"";
  position:absolute;
  left:0;
  top:9px;
  width:5px;
  height:5px;
  border-radius:50%;
  background:#8fb7ff;
  box-shadow:0 0 8px rgba(120,170,255,.8);
}

/* hover ì‹œ ì‚´ì§ ë°˜ì‘ (ê²Œì„ UI ëŠë‚Œ) */
.guide-list li:hover{
  color:#e5edff;
  transform:translateX(4px);
  transition:.15s;
}

.info-sub{
  font-size:10px;
  letter-spacing:2px;
  color:#60a5fa;
  opacity:.6;
  margin-bottom:4px;
}

</style>

</head>

<body>

<div class="top-header">
<div class="side-info">
  <div class="info-box">
    <div class="info-sub">SYSTEM</div>
<div class="info-title">ë„ê° ì•ˆë‚´</div>

<ul class="guide-list">
  <li>ë¬´ê¸° ìš°í´ë¦­ í•˜ì—¬ íšë“ í‘œì‹œ</li>
  <li>íšë“ ë¬´ê¸° ìš°í´ë¦­ í•˜ì—¬ í‘œì‹œ í•´ì œ</li>
  <li>ê¸°ë¡ì€ ë¸Œë¼ìš°ì €ì— ìë™ ì €ì¥</li>
  <li>â€œíšë“ ì´ˆê¸°í™”â€ë¡œ íšë“ í‘œì‹œ ì „ì²´ ì‚­ì œ</li>
  <li>ë’¤ë¡œ ê°€ê¸° ëˆŒëŸ¬ì„œ ê¸°ì§ˆ íŒŒë°ìœ¼ë¡œ ëŒì•„ê°</li>
</ul>
  </div>
</div>
  <button class="back-btn" onclick="goPage('index')">
    â†©ï¸ ë’¤ë¡œê°€ê¸°
  </button>

  <button class="reset-owned-btn" onclick="resetOwned()">
    ğŸ§¹ íšë“ ì´ˆê¸°í™”
  </button>

  <div class="title">
  ë¬´ê¸° ë„ê°
  <span class="count" id="totalCount">(0 / 0)</span>
</div>

</div>
<div class="grade-title grade-6-title">
  â˜… 6ì„± ë¬´ê¸°
  <span class="count" id="sixCount">(0 / 0)</span>
</div>
<div class="grid" id="grid6"></div>

<div class="grade-title grade-5-title">
  â˜… 5ì„± ë¬´ê¸°
  <span class="count" id="fiveCount">(0 / 0)</span>
</div>
<div class="grid" id="grid5"></div>
<script>



let weapons=[];
let owned=new Set(JSON.parse(localStorage.getItem("excludedCards")||"[]"));

load();

async function load(){
  const res = await fetch("https://kuu6132.github.io/db.json");
  const data=await res.json();
  weapons=data.db;
  render();
  updateCounts();
}

function normalizeText(str){
  if(!str) return "";
  return str
    .toString()
    .replace(/[\u200B-\u200D\uFEFF]/g,'')
    .replace(/\u00A0/g,' ')
    .replace(/\s+/g,' ')
    .trim();
}

function render(){

  const grid6=document.getElementById("grid6");
  const grid5=document.getElementById("grid5");

  grid6.innerHTML="";
  grid5.innerHTML="";

  weapons.forEach(w=>{

    const name=normalizeText(w["ì´ë¦„"]);

    const card=document.createElement("div");
    card.className="card";

    const grade=String(w["ì„±ê¸‰"]);
    if(grade.includes("6")) card.classList.add("grade6");
    else card.classList.add("grade5");

    if(owned.has(name)) card.classList.add("done");

    const img=
    "https://cdn.jsdelivr.net/gh/kuu6132/end-field@main/%EB%AC%B4%EA%B8%B0/"
    +encodeURIComponent(name)+".png";

    card.innerHTML=`
      <div class="card-img">
        <img src="${img}"
        onerror="this.src='https://via.placeholder.com/120x110?text=?'">
      </div>
      <div class="card-name">${name}</div>
    `;

    // ìš°í´ë¦­ íšë“ ì²´í¬
    card.addEventListener("contextmenu",e=>{
      e.preventDefault();

      if(owned.has(name)){
        owned.delete(name);
        card.classList.remove("done");
      }else{
        owned.add(name);
        card.classList.add("done");
      }

      localStorage.setItem("excludedCards",JSON.stringify([...owned]));
      updateCounts();
    });

    if(grade.includes("6")) grid6.appendChild(card);
    else grid5.appendChild(card);
  });
  
}

function goPage(page){

  // GAS ì›¹ì•±ì¸ì§€ í™•ì¸
  if (location.hostname.includes("script.google.com")) {

    // í˜„ì¬ URL ìœ ì§€í•˜ë©´ì„œ page íŒŒë¼ë¯¸í„°ë§Œ êµì²´
    const url = new URL(window.location.href);
    url.searchParams.set('page', page);
    window.location.replace(url.toString());

  } else {

    // GitHub Pages (ì •ì  html ì´ë™)
    window.location.href = page + ".html";

  }
}

window.addEventListener("DOMContentLoaded", () => {
  const header = document.querySelector(".top-header");
  if(!header) return;

  window.addEventListener("scroll", () => {
    if(window.scrollY > 10){
      header.classList.add("scrolled");
    }else{
      header.classList.remove("scrolled");
    }
  });
});

function resetOwned(){

  // í™•ì¸ì°½ (ì‹¤ìˆ˜ ë°©ì§€)
  if(!confirm("ëª¨ë“  ë¬´ê¸°ì˜ íšë“ ìƒíƒœë¥¼ ì´ˆê¸°í™” í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

  // 1. localStorage ì‚­ì œ
  localStorage.removeItem("excludedCards");

  // 2. ë©”ëª¨ë¦¬ ë°ì´í„° ì´ˆê¸°í™”
  owned.clear();

  // 3. í™”ë©´ ë‹¤ì‹œ ê·¸ë¦¼
  render();
}

function updateCounts(){

  let totalOwned = 0;
  let sixOwned = 0;
  let fiveOwned = 0;

  let total = weapons.length;
  let sixTotal = 0;
  let fiveTotal = 0;

  weapons.forEach(w=>{
    const name = normalizeText(w["ì´ë¦„"]);
    const isOwned = owned.has(name);
    const grade = String(w["ì„±ê¸‰"]);

    if(grade.includes("6")){
      sixTotal++;
      if(isOwned) sixOwned++;
    }else{
      fiveTotal++;
      if(isOwned) fiveOwned++;
    }

    if(isOwned) totalOwned++;
  });

  document.getElementById("totalCount").textContent = `(${totalOwned} / ${total})`;
  document.getElementById("sixCount").textContent   = `(${sixOwned} / ${sixTotal})`;
  document.getElementById("fiveCount").textContent  = `(${fiveOwned} / ${fiveTotal})`;
}

</script>


</body>
</html>
